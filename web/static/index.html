<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web Analyzer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Web Analyzer</h1>

<label for="urlInput">Enter a URL to analyze:</label>
<input type="text" id="urlInput" placeholder="https://example.com"/>

<button onclick="analyzeUrl()">Analyze</button>

<div id="resultContainer">
    <h3>Analysis Result</h3>
    <pre id="result"></pre>
</div>

<script>
    async function analyzeUrl() {
        const urlInput = document.getElementById("urlInput");
        const resultBox = document.getElementById("result");
        const url = urlInput.value.trim();

        resultBox.textContent = "üîç Analyzing...";
        resultBox.style.color = "black";

        if (!url) {
            resultBox.textContent = "‚ùå Please enter a URL.";
            resultBox.style.color = "red";
            return;
        }

        try {
            const response = await fetch("http://localhost:8080/analyze-url", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({url})
            });

            // Handle non-200 responses
            if (!response.ok) {
                const errorText = await response.text();
                resultBox.textContent = `‚ùå Error ${response.status}: ${errorText}`;
                resultBox.style.color = "red";
                return;
            }

            const data = await response.json();
            resultBox.textContent = JSON.stringify(data, null, 2);
            resultBox.style.color = "black";
        } catch (err) {
            resultBox.textContent = `‚ùå Network or server error: ${err.message}`;
            resultBox.style.color = "red";
        }
    }
</script>

</body>
</html>